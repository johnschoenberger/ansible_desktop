---
- hosts: localhost
  tags: always
  become: true
  vars: 
    - ansible_shell_allow_world_readable_temp: true
  pre_tasks:
    - name: pre-run | update package cache (arch)
      tags: always
      pacman: update_cache=yes
      changed_when: False
      when: ansible_distribution == "Archlinux"

    - name: pre-run | update package cache (CentOS/Rocky/RHEL)
      tags: always
      dnf: update_cache=yes
      changed_when: False
      when: ansible_distribution in ["CentOS", "Rocky", "RedHat"]

    - name: pre-run | update package cache (Debian/Ubuntu)
      tags: always
      apt: update_cache=yes
      changed_when: False
      when: ansible_distribution in ["Debian", "Ubuntu"]

  tasks:
    - include: tasks/users.yml
    - include: tasks/cron.yml
    - include: tasks/packages.yml
    - include: tasks/gnome.yml
